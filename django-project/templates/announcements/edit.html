{% extends "course_base.html" %}
{% load url from future %}

{% block course_page_title %}Edit Announcement{% endblock course_page_title %}

{% block m_column_content %}
<div id="c2g_layout_m_column" class="span6">
    <form name="edit_announcement_form" action="{% url 'courses.announcements.actions.save_announcement' %}" method="POST">
        Title <input name="title" id="announcement_title" value="{{announcement.title}}"/><br/><br/>
        Description:<br/>
        <textarea class="tinymce" name="description" id="announcement_description">{{announcement.description}}</textarea><br/>
        <input type="hidden" name="announcement_id" value="{{ announcement.id }}" />
        <input type="hidden" name="course_prefix" value="{{ common_page_data.course_prefix }}" />
        <input type="hidden" name="course_suffix" value="{{ common_page_data.course_suffix }}" />
        <input type="hidden" name="commit" id="commit" value="0" />
        <input type="hidden" name="revert" id="revert" value="0" />
        {% csrf_token %}
        
        <input type="button" class="btn btn-primary" value="Save and Publish" onclick="SaveAnnouncement(1,0);" />
        <input type="button" class="btn" value="Save as Draft" onclick="SaveAnnouncement(0,0);" />
        <input type="button" class="btn" value="Revert" onclick="SaveAnnouncement(0,1);" />
        <a href="{% url 'courses.views.main' common_page_data.course_prefix common_page_data.course_suffix %}" class="btn">Cancel</a>
    </form>
    <script type="text/javascript">
        function SaveAnnouncement(commit,revert) {
            $("#commit").val(commit);
            $("#revert").val(revert);
            document.forms.edit_announcement_form.submit();
        }
    </script>
</div>
{% endblock m_column_content %}

{% block addl_scripts %}
{% include "controls/tinymce.html" %}
{% endblock addl_scripts %}